schemaVersion: 2.2.0
metadata:
  name: java-postgres-workspace
  version: 1.0.0
components:
  - name: java
    container:
      image: maven:3.9.6-eclipse-temurin-17
      memoryLimit: 1Gi
      mountSources: true
      endpoints:
        - name: http
          targetPort: 8080
      env:
        - name: DATABASE_URL
          value: jdbc:postgresql://postgresql:5432/mydb
        - name: DB_USER
          value: myuser
        - name: DB_PASSWORD
          value: mypassword

  - name: postgresql
    container:
      image: bitnami/postgresql:17
      memoryLimit: 512Mi
      env:
        - name: POSTGRESQL_USERNAME
          value: myuser
        - name: POSTGRESQL_PASSWORD
          value: mypassword
        - name: POSTGRESQL_DATABASE
          value: mydb
